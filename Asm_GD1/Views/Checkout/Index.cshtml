@{
    ViewData["Title"] = "Thanh toán";
}

@section Styles {
    <link rel="stylesheet" href="~/css/pages/checkout.css" />
}

<div class="checkout-page">
    <div class="container">
        <!-- Progress Steps -->
        <div class="checkout-progress">
            <div class="step completed">
                <div class="step-number">1</div>
                <span>Giỏ hàng</span>
            </div>
            <div class="step active">
                <div class="step-number">2</div>
                <span>Thông tin</span>
            </div>
            <div class="step">
                <div class="step-number">3</div>
                <span>Thanh toán</span>
            </div>
            <div class="step">
                <div class="step-number">4</div>
                <span>Hoàn thành</span>
            </div>
        </div>

        <div class="checkout-content">
            <!-- Customer Information -->
            <div class="checkout-main">
                <form id="checkoutForm">
                    <!-- Delivery Information -->
                    <div class="checkout-section">
                        <h2><i class="fas fa-map-marker-alt"></i> Thông tin giao hàng</h2>

                        <div class="form-grid">
                            <div class="form-group">
                                <label for="fullName">Họ và tên *</label>
                                <input type="text" id="fullName" name="fullName" required>
                            </div>

                            <div class="form-group">
                                <label for="phone">Số điện thoại *</label>
                                <input type="tel" id="phone" name="phone" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="email">Email</label>
                            <input type="email" id="email" name="email">
                        </div>

                        <div class="form-group">
                            <label for="address">Địa chỉ giao hàng *</label>
                            <input type="text" id="address" name="address" placeholder="Số nhà, tên đường" required>
                        </div>

                        <div class="form-grid">
                            <div class="form-group">
                                <label for="district">Quận/Huyện *</label>
                                <select id="district" name="district" required>
                                    <option value="">Chọn quận/huyện</option>
                                    <option value="1">Quận 1</option>
                                    <option value="3">Quận 3</option>
                                    <option value="7">Quận 7</option>
                                    <option value="10">Quận 10</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="ward">Phường/Xã *</label>
                                <select id="ward" name="ward" required>
                                    <option value="">Chọn phường/xã</option>
                                    <option value="">Thành phố Hồ Chí Minh</option>
                                    <option value="">Biên Hoà</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="note">Ghi chú đơn hàng</label>
                            <textarea id="note" name="note" placeholder="Ghi chú cho người giao hàng..."></textarea>
                        </div>
                    </div>

                    <!-- Delivery Time -->
                    <div class="checkout-section">
                        <h2><i class="fas fa-clock"></i> Thời gian giao hàng</h2>

                        <div class="delivery-time-options">
                            <label class="time-option">
                                <input type="radio" name="deliveryTime" value="now" checked>
                                <div class="time-info">
                                    <strong>Giao ngay</strong>
                                    <span>Trong 30-45 phút</span>
                                </div>
                            </label>

                            <label class="time-option">
                                <input type="radio" name="deliveryTime" value="schedule">
                                <div class="time-info">
                                    <strong>Đặt lịch giao</strong>
                                    <span>Chọn thời gian cụ thể</span>
                                </div>
                            </label>
                        </div>

                        <div class="schedule-options" id="scheduleOptions" style="display: none;">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="deliveryDate">Ngày giao</label>
                                    <input type="date" id="deliveryDate" name="deliveryDate">
                                </div>

                                <div class="form-group">
                                    <label for="deliveryTimeSlot">Khung giờ</label>
                                    <select id="deliveryTimeSlot" name="deliveryTimeSlot">
                                        <option value="morning">Sáng (7:00 - 11:00)</option>
                                        <option value="afternoon">Chiều (11:00 - 16:00)</option>
                                        <option value="evening">Tối (16:00 - 21:00)</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Payment Method -->
                    <div class="checkout-section">
                        <h2><i class="fas fa-credit-card"></i> Phương thức thanh toán</h2>

                        <div class="payment-methods">
                            <label class="payment-method">
                                <input type="radio" name="paymentMethod" value="cod" checked>
                                <div class="payment-info">
                                    <div class="payment-icon">
                                        <i class="fas fa-money-bill-wave"></i>
                                    </div>
                                    <div class="payment-details">
                                        <strong>Thanh toán khi nhận hàng (COD)</strong>
                                        <span>Thanh toán bằng tiền mặt khi nhận món</span>
                                    </div>
                                </div>
                            </label>

                            <label class="payment-method">
                                <input type="radio" name="paymentMethod" value="momo">
                                <div class="payment-info">
                                    <div class="payment-icon">
                                        <img src="~/Images/momo-logo.jpg" alt="MoMo">
                                    </div>
                                    <div class="payment-details">
                                        <strong>Ví điện tử MoMo</strong>
                                        <span>Thanh toán nhanh chóng qua ví MoMo</span>
                                    </div>
                                </div>
                            </label>

                            <label class="payment-method">
                                <input type="radio" name="paymentMethod" value="zalopay">
                                <div class="payment-info">
                                    <div class="payment-icon">
                                        <img src="~/Images/zalopay-logo.jpg" alt="ZaloPay">
                                    </div>
                                    <div class="payment-details">
                                        <strong>Ví điện tử ZaloPay</strong>
                                        <span>Thanh toán an toàn với ZaloPay</span>
                                    </div>
                                </div>
                            </label>

                            <label class="payment-method">
                                <input type="radio" name="paymentMethod" value="vnpay">
                                <div class="payment-info">
                                    <div class="payment-icon">
                                        <img src="~/Images/vnpay-logo.jpg" alt="VNPAY">
                                    </div>
                                    <div class="payment-details">
                                        <strong>VNPAY QR</strong>
                                        <span>Thanh toán qua ngân hàng với VNPAY</span>
                                    </div>
                                </div>
                            </label>
                        </div>
                    </div>
                </form>
            </div>

            <!-- Order Summary -->
            <div class="checkout-sidebar">
                <div class="order-summary">
                    <h3>Đơn hàng của bạn</h3>

                    <div class="summary-items">
                        <div class="summary-item">
                            <img src="~/Images/com-tam.jpg" alt="Cơm tấm">
                            <div class="item-info">
                                <h4>Cơm tấm sườn nướng</h4>
                                <span class="item-options">Lớn • x2</span>
                            </div>
                            <span class="item-price">116,000₫</span>
                        </div>

                        <div class="summary-item">
                            <img src="~/Images/pho-bo.jpg" alt="Phở bò">
                            <div class="item-info">
                                <h4>Phở bò tái</h4>
                                <span class="item-options">Bình thường • x1</span>
                            </div>
                            <span class="item-price">65,000₫</span>
                        </div>

                        <div class="summary-item">
                            <img src="~/Images/banh-mi.jpg" alt="Bánh mì">
                            <div class="item-info">
                                <h4>Bánh mì thịt nướng</h4>
                                <span class="item-options">Bình thường • x3</span>
                            </div>
                            <span class="item-price">90,000₫</span>
                        </div>
                    </div>

                    <div class="summary-calculations">
                        <div class="calc-row">
                            <span>Tạm tính (6 món):</span>
                            <span>271,000₫</span>
                        </div>

                        <div class="calc-row">
                            <span>Phí giao hàng:</span>
                            <span id="checkoutShippingFee">15,000₫</span>
                        </div>

                        <div class="calc-row discount" id="checkoutDiscount" style="display: none;">
                            <span>Giảm giá:</span>
                            <span>-27,100₫</span>
                        </div>

                        <div class="calc-row total">
                            <span>Tổng cộng:</span>
                            <span id="checkoutTotal">286,000₫</span>
                        </div>
                    </div>

                    <div class="checkout-actions">
                        <button type="button" class="btn-back" onclick="goBackToCart()">
                            <i class="fas fa-arrow-left"></i>
                            Quay lại giỏ hàng
                        </button>

                        <button type="submit" class="btn-place-order" form="checkoutForm">
                            <i class="fas fa-check"></i>
                            Đặt hàng
                            <span class="order-total">286,000₫</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
